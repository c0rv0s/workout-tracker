<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#0a0b0f">
  <meta name="description" content="Track your workout rotations with style. Power, hypertrophy, and everything in between.">
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="icon" href="icons/w-icon.svg">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="style.css">
  <title>Rotation — Workout Tracker</title>
</head>
<body>
  <header class="app-header">
    <div>
      <h1>Rotation</h1>
    </div>
    <button id="install-button" class="ghost-btn" hidden>Install App</button>
  </header>

  <div id="storage-warning" class="storage-warning" hidden>
    <div class="storage-warning-content">
      <span class="storage-warning-icon">⚠️</span>
      <div class="storage-warning-text">
        <strong>Storage Warning:</strong> You have 5,000+ workout sessions stored. Consider exporting older data to maintain performance.
      </div>
      <button id="dismiss-warning" class="storage-warning-dismiss" aria-label="Dismiss warning">×</button>
    </div>
  </div>

  <div class="week-strip" id="week-bar"></div>

  <main class="layout">
    <section class="panel">
      <div class="panel-head">
        <div>
          <p class="eyebrow">Today's Plan</p>
          <h2 id="planned-title">Loading plan…</h2>
        </div>
        <input type="hidden" id="session-date">
      </div>
      <div class="panel-body">
        <p class="muted" id="prefill-copy">Prefilling with your most recent weights for this workout.</p>
        <div id="exercise-list" class="exercise-list"></div>
        <div class="note-area">
          <label for="session-note">Session note</label>
          <textarea id="session-note" rows="3" placeholder="How did it feel? Any PRs?"></textarea>
        </div>
        <div class="actions">
          <button id="save-session" class="primary-btn">Save Session</button>
          <button id="reset-today" class="ghost-btn">Reset to Today</button>
        </div>
      </div>
    </section>

    <section class="panel calendar-panel">
      <div class="panel-head">
        <div>
          <p class="eyebrow">Calendar</p>
          <h2>Training Log</h2>
        </div>
        <div class="month-nav">
          <button id="prev-month" class="icon-btn" aria-label="Previous month">‹</button>
          <div id="month-label"></div>
          <button id="next-month" class="icon-btn" aria-label="Next month">›</button>
        </div>
      </div>
      <div id="calendar-grid" class="calendar-grid"></div>
      <div id="day-detail" class="day-detail muted">Select a day to see what you did.</div>
    </section>

    <section class="panel">
      <div class="panel-head">
        <div>
          <p class="eyebrow">History</p>
          <h2>Recent Sessions</h2>
        </div>
      </div>
      <ul id="history-list" class="history-list"></ul>
    </section>

    <section class="panel">
      <div class="panel-head">
        <div>
          <p class="eyebrow">Data</p>
          <h2>Import & Export</h2>
        </div>
      </div>
      <div class="panel-body import-body">
        <label for="import-text">Paste JSON export file or dated workouts from your notes</label>
        <textarea
          id="import-text"
          rows="8"
          placeholder="12/26 lower hypertrophy&#10;Front squat&#9;25/side&#9;3-4x8-12&#10;Barbell lunge&#9;35/side&#10;...&#10;&#10;Took it easy today"
        ></textarea>
        <div class="actions import-actions">
          <button id="import-button" class="primary-btn">Import Notes</button>
          <button id="export-button" class="ghost-btn">Export Data</button>
          <p class="muted">Date + workout name on the first line, one exercise per line. Blank line before notes.</p>
        </div>
      </div>
    </section>

    <section class="panel">
      <div class="panel-head">
        <div>
          <p class="eyebrow">Cloud Backup</p>
          <h2>Netlify Database</h2>
        </div>
      </div>
      <div class="panel-body import-body">
        <p class="muted">Back up your workout data to Netlify and restore it on any device using your backup key.</p>
        <div class="backup-key-row">
          <label for="backup-key">Backup key</label>
          <div class="backup-key-controls">
            <input id="backup-key" type="text" autocomplete="off" spellcheck="false" maxlength="64" />
            <button id="backup-key-copy" class="ghost-btn" type="button">Copy</button>
          </div>
          <p class="muted">Keep this key private. Use the same key to restore on another device.</p>
        </div>
        <div class="actions import-actions">
          <button id="cloud-backup-btn" class="primary-btn">Backup to Netlify</button>
          <button id="cloud-restore-btn" class="ghost-btn">Restore from Netlify</button>
        </div>
        <div id="cloud-status" class="muted" style="margin-top: 12px; font-size: 13px;"></div>
      </div>
    </section>
  </main>

  <script src="main.js" type="module"></script>
</body>
</html>
